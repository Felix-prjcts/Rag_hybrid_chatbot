# Hybrid RAG Explorer (Dense + Sparse)

Ce projet est une impl√©mentation d'un moteur de recherche **RAG (Retrieval-Augmented Generation)** qui combine deux approches : la recherche vectorielle (s√©mantique) et la recherche par mots-cl√©s (lexicale).

L'id√©e de base √©tait de d√©passer les limites des RAG classiques qui utilisent seulement les vecteurs (embeddings). Les vecteurs c'est g√©nial pour capter le "sens global" d'une phrase, mais √ßa √©choue souvent quand on cherche un terme tr√®s pr√©cis (un num√©ro d'article de loi, une r√©f√©rence technique exact, etc).

J'ai donc impl√©ment√© une **Fusion de Rangs (RRF - Reciprocal Rank Fusion)** pour prendre le meilleur des deux mondes et voir si √ßa am√©liore la pertinence.

## üìÇ Structure du projet

Le code est organis√© de fa√ßon modulaire pour s√©parer la logique backend de l'interface utilisateur :

* **`rag_engine.py`** : C'est le "cerveau" du projet. Contient la classe `RAGEngine` qui g√®re tout le backend : nettoyage des PDF, le chunking, l'indexation Qdrant (pour le Dense) et BM25 (pour le Sparse), et surtout l'algo de fusion des r√©sultats.
* **`app.py`** : L'interface principale en Streamlit. C'est l'app Hybride compl√®te. Elle permet de choisir entre des d√©mos (Syst√®me Solaire, RGPD) ou d'uploader ses propres fichiers pour tester le RAG.
* **`app_dense.py`** : Une version simplifi√©e qui n'utilise **que** la recherche vectorielle (sans BM25). Je l'ai gard√©e pour pouvoir comparer les r√©sultats A/B et prouver l'efficacit√© de l'hybride sur des cas pr√©cis.
* **`data_demo/`** : Dossier contenant les fichiers sources pour les tests rapides (ex: `Solar_System.pdf`, `RGPD.pdf`).

## üõ† Tech Stack

J'ai essay√© de rester sur une stack locale et l√©g√®re (CPU friendly), sans d√©pendre d'API payantes :
* **Interface :** Streamlit
* **Vector Store :** Qdrant (en mode `:memory:` pour la rapidit√©)
* **Embedding :** `all-MiniLM-L6-v2` (rapide et efficace)
* **Keyword Search :** BM25 (`rank_bm25`)
* **LLM :** `google/flan-t5-base` (tourne en local)
* **PDF Parsing :** PyMuPDF (fitz)

## üí° Pourquoi l'Hybride ?

Durant mes tests, j'ai remarqu√© des diff√©rences int√©ressantes :

1.  **Cas Dense :** Si je demande *"What is the mass of Jupiter?"*, le Dense est meilleur car il comprend le concept de masse/poids m√™me si le mot exact n'y est pas toujours.
2.  **Cas Sparse :** Si je demande *"What does Article 17 say?"* (dans le RGPD), le Dense se trompe souvent de num√©ro, alors que le **Sparse (BM25)** trouve le token "17" imm√©diatement.

L'algo RRF dans `rag_engine.py` normalise les scores de ces deux m√©thodes pour remonter les documents qui font consensus.

## Comment lancer le projet

Il faut d'abord installer les d√©pendances n√©cessaires :

```bash
pip install streamlit sentence-transformers qdrant-client rank-bm25 transformers pymupdf langchain-text-splitters

Ensuite : 
```bash
python -m streamlit run app.py 